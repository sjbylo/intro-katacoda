The Source-To-Image (S2I) tool comes integrated in all OpenShift clusters.  It is especially interesting for OpenShift developers as it can shield developers from the details of creating Docker container images.  More can be read about S2I at the [project's home page](https://github.com/openshift/source-to-image/) and there are several [blogs](https://blog.openshift.com/deploying-applications-from-images-in-openshift-part-one-web-console/) out there about the subject. 

There are many reasons to use S2I but the two main reasons are:

1. A developer can get up and running with Docker without knowing anything about Docker itself.  This is great for Developers who are not interested in Docker and just want to get their code running on OpenShift. 
1. An Enterprise wants to have more control over how their teams build container images and don't want to allow developers the freedom to install anything they choose (as root) into container images.  The S2I process limits the user somewhat from the system and does not allow anything to be installed during the S2I process using root privileges. 

So, for this scenario, imagin you are a lead developer or an operations lead and want to create a way for your developers to easily create secure docker images containing their applications. 

# The simplified runtime

The simplified application "runtime" will be represented by the "cat" command and will simply display the contents of any "source code" files provided by the developer during the S2I build process. 

The "simplified runtime" used in this tutorial is just the Linux command "cat", which will output the "source code" provided by running the command "cat src/*"

The process looks like this:

<<add image>> #FIXME

# How to create the S2I builder image

#FIXME Explain the sturcture of an S2I image. e.g. scripts etc 

The Dockerfile in this directory creates an S2I builder image.  The simple application runtime is represented by the "cat" command and will simply display the contents of any "source code" files provided by the developer during the S2I build process. 

Try the following:

Look at the Dockerfile to understand how it creates a special docker image, an S2I builder image, essentially by adding S2I scripts and labelling the image. 

``cat Dockerfile``{{execute}}

Using docker, build the S2I builder image like this:

``docker build -t s2i-simple-builder . ``{{execute}}

and execute the builder image like this:

``docker run s2i-simple-builder``{{execute}}

Notice that when "docker run" is used to execute an S2I builder image directly, without providing any "source code", a message is deisplayed describing how to use the image.  The output of the file "usage" is shown. # FIXME

The above "docker build" command only creates the image and stores it in the local docker storage and not in any docker registry. To build the image again but this time inside openshift and have it pushed into the internal registry, run these commands:

Create the build configuration (using Docker build strategry) 

``oc new-build --name s2i-simple-builder --binary=true``{{execute}}

Start the build, using the current working directory (.)

``oc start-build s2i-simple-builder --from-dir=.``{{execute}}

Check the build output for errors 

``oc logs bc/s2i-simple-builder -f``{{execute}}

If all went well, the new S2I buider image (s2i-simple-builder) has been created and pushed successfully into the registry.  You should see "Image successfully pushed".

Show the newly created image stream which references and tracks the S2I simple builder image in the registry.

```
oc get is
oc describe is <is>
```

The builder image can be used to create a runtime image with the developer's simple application.  Continue to the next step to build your own simplified application. 


